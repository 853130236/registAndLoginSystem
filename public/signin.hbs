<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv='content-Type' content='text/html;charset=utf-8'>
    <script src='./jquery-3.2.1.min.js' type='text/javascript'></script>
    <script src='./handlebars-v4.0.11.js' type='text/javascript'></script>
    <link rel='stylesheet' href='./signin.css' type='text/css'/>
    <link href='https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css' rel='stylesheet'>
    <script src='https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js'></script>
    <title>Signin</title>      
  </head>
  <body>
    <div id='centerPosition'>
      <h1>Sigin</h1>   
      <form action='#' method='post'>
        <span class='glyphicon glyphicon-user'></span><input type='text' name='username' placeholder='input username' id='username'/><br/>
        <span class='glyphicon glyphicon-lock'></span><input type='password' name='password' placeholder='input password' id='password'/><br/>
        <button type='button' id='regist'>Regist</button>
        <button type='button' id='submit'>Login</button>
      </form>
      <div id='result'></div>
    </div>
    <script type='text/javascript'>
    $(document).ready(() => {
      $('#submit').click(() => {
        $.ajax({
          type: 'POST',
          url: '/signin',
          data: {
            'username': $('#username').val(), 
            'password': $('#password').val()
          },
          dataType: 'json', 
          success: (data) => {
            if (data.success) location.href = data.msg
            else $('#result').text(data.msg)
          }
        })
      }) 
      $('#regist').click(() => {
        location.href = '/regist'
      })  
    })
  </script>
  </body>
</html>